# 不要修改该文件，会自动生成，详见 https://gitlab.alibaba-inc.com/node/ci
before_script:
  - echo $PATH
  - time enclose install tnpm:tnpm
  - tnpm -v

{%- for item in versions %}
{{item.name}}-{{item.version}}:
  script:
    - time tnpm i --install-{{item.name}}={{item.version}} --no-cache --internal-oss-cache
    - node -e "console.log('%j, %j', process.versions, process.execPath)"
    - time tnpm run {{command}}
  {%- if tags %}
  tags:
    - {{tags}}
  {%- endif %}
{%- else %}
test:
  script:
    - time tnpm i --no-cache --internal-oss-cache
    - node -e "console.log('%j, %j', process.versions, process.execPath)"
    - time tnpm run {{command}}
  {%- if tags %}
  tags:
    - {{tags}}
  {%- endif %}
{%- endfor %}
