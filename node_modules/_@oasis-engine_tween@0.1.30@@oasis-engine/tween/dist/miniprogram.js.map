{"version":3,"file":"miniprogram.js","sources":["../src/Tween.ts","../src/Enums.ts","../src/BezierEasing.ts","../src/Easing.ts","../src/TweenerBase.ts","../src/Tweener.ts","../src/plugins/FloatPlugin.ts","../src/plugins/Vector2Plugin.ts","../src/plugins/Vector3Plugin.ts","../src/plugins/Vector4Plugin.ts"],"sourcesContent":["/**\n * Tween类\n * @class\n */\nclass Tween {\n  private _nextId;\n  public tweeners;\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._nextId = 0;\n    this.tweeners = {};\n  }\n\n  /**\n   * 下一个id\n   * @member {number}\n   * @readonly\n   */\n  getId() {\n    return this._nextId++;\n  }\n\n  /**\n   * 增加关键帧\n   * @param {Object} tweener 关键帧\n   */\n  add(tweener) {\n    if (!tweener.id) {\n      tweener.id = this.getId();\n    }\n    this.tweeners[tweener.id] = tweener;\n  }\n\n  /**\n   * 更新tween内部的状态,删除已经播放过且不需要的关键帧\n   * @param {number}  deltaTime 两帧之间的时间\n   */\n  update(deltaTime) {\n    for (const tweenerId in this.tweeners) {\n      const tweener = this.tweeners[tweenerId];\n\n      tweener.update(deltaTime);\n\n      // remove unused tweener\n      if (tweener._played && tweener._paused && !tweener.preserved) {\n        delete this.tweeners[tweenerId];\n      }\n    }\n  }\n}\n\nexport { Tween };\n","export const LOOP_TYPE = {\n  Restart: 0,\n  Yoyo: 1\n  // 暂时不实现\n  // Incremental: 2,\n};\n","/**\n * Fork from https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === \"function\";\n\nfunction A(aA1, aA2) {\n  return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n}\nfunction B(aA1, aA2) {\n  return 3.0 * aA2 - 6.0 * aA1;\n}\nfunction C(aA1) {\n  return 3.0 * aA1;\n}\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier(aT, aA1, aA2) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n}\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope(aT, aA1, aA2) {\n  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n}\n\nfunction binarySubdivide(aX, aA, aB, mX1, mX2) {\n  var currentX,\n    currentT,\n    i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n    var currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) {\n      return aGuessT;\n    }\n    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n}\n\nfunction LinearEasing(x) {\n  return x;\n}\n\nexport function bezier(mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error(\"bezier x values must be in [0, 1] range\");\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX(aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing(x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0 || x === 1) {\n      return x;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n}\n","import { bezier } from \"./BezierEasing\";\n\n// t, b, c, d => currentTime, startValue, changeInValue, totalTime\nexport function linear(t, b, c, d) {\n  return (c * t) / d + b;\n}\n\nexport function easeInQuad(t, b, c, d) {\n  return c * (t /= d) * t + b;\n}\n\nexport function easeOutQuad(t, b, c, d) {\n  return -c * (t /= d) * (t - 2) + b;\n}\n\nexport function easeInOutQuad(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t + b;\n  } else {\n    return (-c / 2) * (--t * (t - 2) - 1) + b;\n  }\n}\n\nexport function easeInCubic(t, b, c, d) {\n  return c * (t /= d) * t * t + b;\n}\n\nexport function easeOutCubic(t, b, c, d) {\n  return c * ((t = t / d - 1) * t * t + 1) + b;\n}\n\nexport function easeInOutCubic(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t * t + b;\n  } else {\n    return (c / 2) * ((t -= 2) * t * t + 2) + b;\n  }\n}\n\nexport function easeInQuart(t, b, c, d) {\n  return c * (t /= d) * t * t * t + b;\n}\n\nexport function easeOutQuart(t, b, c, d) {\n  return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n}\n\nexport function easeInOutQuart(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t * t * t + b;\n  } else {\n    return (-c / 2) * ((t -= 2) * t * t * t - 2) + b;\n  }\n}\n\nexport function easeInQuint(t, b, c, d) {\n  return c * (t /= d) * t * t * t * t + b;\n}\n\nexport function easeOutQuint(t, b, c, d) {\n  return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n}\n\nexport function easeInOutQuint(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t * t * t * t + b;\n  } else {\n    return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n  }\n}\n\nexport function easeInSine(t, b, c, d) {\n  return -c * Math.cos((t / d) * (Math.PI / 2)) + c + b;\n}\n\nexport function easeOutSine(t, b, c, d) {\n  return c * Math.sin((t / d) * (Math.PI / 2)) + b;\n}\n\nexport function easeInOutSine(t, b, c, d) {\n  return (-c / 2) * (Math.cos((Math.PI * t) / d) - 1) + b;\n}\n\nexport function easeInExpo(t, b, c, d) {\n  let _ref;\n  return (_ref = t === 0) !== null\n    ? _ref\n    : {\n        b: c * Math.pow(2, 10 * (t / d - 1)) + b\n      };\n}\n\nexport function easeOutExpo(t, b, c, d) {\n  let _ref;\n  return (_ref = t === d) !== null\n    ? _ref\n    : b +\n        {\n          c: c * (-Math.pow(2, (-10 * t) / d) + 1) + b\n        };\n}\n\nexport function easeInOutExpo(t, b, c, d) {\n  if (t === 0) {\n    b;\n  }\n  if (t === d) {\n    b + c;\n  }\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * Math.pow(2, 10 * (t - 1)) + b;\n  } else {\n    return (c / 2) * (-Math.pow(2, -10 * --t) + 2) + b;\n  }\n}\n\nexport function easeInCirc(t, b, c, d) {\n  return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n}\n\nexport function easeOutCirc(t, b, c, d) {\n  return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n}\n\nexport function easeInOutCirc(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (-c / 2) * (Math.sqrt(1 - t * t) - 1) + b;\n  } else {\n    return (c / 2) * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n  }\n}\n\nexport function easeInElastic(t, b, c, d) {\n  let a, p, s;\n  s = 1.70158;\n  p = 0;\n  a = c;\n  if (t === 0) {\n    b;\n  } else if ((t /= d) === 1) {\n    b + c;\n  }\n  if (!p) {\n    p = d * 0.3;\n  }\n  if (a < Math.abs(c)) {\n    a = c;\n    s = p / 4;\n  } else {\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\n  }\n  return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b;\n}\n\nexport function easeOutElastic(t, b, c, d) {\n  let a, p, s;\n  s = 1.70158;\n  p = 0;\n  a = c;\n  if (t === 0) {\n    b;\n  } else if ((t /= d) === 1) {\n    b + c;\n  }\n  if (!p) {\n    p = d * 0.3;\n  }\n  if (a < Math.abs(c)) {\n    a = c;\n    s = p / 4;\n  } else {\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\n  }\n  return a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) + c + b;\n}\n\nexport function easeInOutElastic(t, b, c, d) {\n  let a, p, s;\n  s = 1.70158;\n  p = 0;\n  a = c;\n  if (t === 0) {\n    b;\n  } else if ((t /= d / 2) === 2) {\n    b + c;\n  }\n  if (!p) {\n    p = d * (0.3 * 1.5);\n  }\n  if (a < Math.abs(c)) {\n    a = c;\n    s = p / 4;\n  } else {\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\n  }\n  if (t < 1) {\n    return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b;\n  } else {\n    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) * 0.5 + c + b;\n  }\n}\n\nexport function easeInBack(t, b, c, d, s) {\n  if (s === void 0) {\n    s = 1.70158;\n  }\n  return c * (t /= d) * t * ((s + 1) * t - s) + b;\n}\n\nexport function easeOutBack(t, b, c, d, s) {\n  if (s === void 0) {\n    s = 1.70158;\n  }\n  return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n}\n\nexport function easeInOutBack(t, b, c, d, s) {\n  if (s === void 0) {\n    s = 1.70158;\n  }\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n  } else {\n    return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n  }\n}\n\nexport function easeInBounce(t, b, c, d) {\n  let v;\n  v = easeOutBounce(d - t, 0, c, d);\n  return c - v + b;\n}\n\nexport function easeOutBounce(t, b, c, d) {\n  if ((t /= d) < 1 / 2.75) {\n    return c * (7.5625 * t * t) + b;\n  } else if (t < 2 / 2.75) {\n    return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n  } else if (t < 2.5 / 2.75) {\n    return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n  } else {\n    return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n  }\n}\n\nexport function easeInOutBounce(t, b, c, d) {\n  let v;\n  if (t < d / 2) {\n    v = easeInBounce(t * 2, 0, c, d);\n    return v * 0.5 + b;\n  } else {\n    v = easeOutBounce(t * 2 - d, 0, c, d);\n    return v * 0.5 + c * 0.5 + b;\n  }\n}\n\n/**\n * 通过bezier曲线控制点入参生成easing\n * Hats off to gre：https://github.com/gre/bezier-easing\n *\n * @param x1 控制点1的 x，范围 0-1\n * @param y1 控制点1的 y，范围 0-1\n * @param x2 控制点2的 x，范围 0-1\n * @param y2 控制点2的 y，范围 0-1\n */\nexport function bezierEasing(x1, y1, x2, y2) {\n  const easing = bezier(x1, y1, x2, y2);\n\n  return (t, b, c, d) => {\n    return c * easing(t / d) + b;\n  };\n}\n","import { LOOP_TYPE } from \"./Enums\";\nimport * as Easing from \"./Easing\";\n\nconst noop = () => {};\n\n// on events\n// play, pause, complete, kill, rewind, update\n/**\n * TweenBase类\n * @class\n * @private\n */\nclass TweenerBase {\n  protected _time;\n  protected _paused;\n  protected _remainLoops;\n  protected _played;\n  public options;\n  public elapsedTime;\n  public interval;\n  public rewind;\n  public preserved;\n  public startValue;\n  public endValue;\n  public getter;\n  public setter;\n\n  constructor(getter, setter, endValue, interval, options = {}, target) {\n    this.options = {\n      id: \"\",\n      loops: {\n        // set -1 as infinite\n        count: 0,\n        type: LOOP_TYPE.Yoyo\n      },\n      easing: Easing.linear,\n      delay: 0,\n\n      plugin: noop,\n      pluginOptions: {},\n\n      // callbacks\n      onComplete: noop,\n      onTick: noop,\n\n      ...options\n    };\n\n    this._time = 0;\n    this._remainLoops = this.options.loops.count || 0;\n    this._paused = true;\n    this._played = false;\n    this.rewind = false;\n    this.preserved = false;\n\n    this.elapsedTime = 0;\n    this.startValue = getter();\n    this.endValue = endValue;\n    this.getter = getter;\n    this.setter = setter;\n\n    this.interval = interval;\n  }\n\n  duration() {}\n\n  update(deltaTime) {}\n\n  /**\n   * 设置循环数\n   * @param {number}  count 循环次数\n   * @param {LOOP_TYPE} type 循环类型\n   */\n  setLoops(count, type = LOOP_TYPE.Yoyo) {\n    this.options.loops = { count, type };\n    // reset loop\n    this._remainLoops = count;\n\n    return this;\n  }\n\n  set(key, value) {\n    this.options = { ...this.options, ...{ [key]: value } };\n    return this;\n  }\n\n  stop() {\n    this.options.onComplete(this);\n\n    this._paused = true;\n\n    return this;\n  }\n\n  pause() {\n    if (this._paused) return false;\n    this._paused = true;\n\n    return this;\n  }\n\n  start(tweenManager) {\n    if (tweenManager) {\n      tweenManager.add(this);\n    }\n\n    if (!this._paused) return false;\n    this.elapsedTime = 0;\n    this._paused = false;\n    this._played = true;\n\n    return this;\n  }\n}\n\nexport { TweenerBase };\n","import { LOOP_TYPE } from \"./Enums\";\nimport { TweenerBase } from \"./TweenerBase\";\n\nconst noop = () => {};\n\n// on events\n// play, pause, complete, kill, rewind, update\n/**\n * Tweener动画类\n * @extends TweenerBase\n */\nclass Tweener extends TweenerBase {\n  /**\n   * @constructor\n   * @param {function} getter 获取函数\n   * @param {function} setter 设置函数\n   * @param {number} endValue 结束值\n   * @param {number} interval 时间区间，以ms为单位\n   * @param {Object} options 配置\n   * @param target\n   * @param {function} options.onComplete 完成时调用的函数\n   */\n  constructor(getter, setter, endValue, interval, options = {}, target = null) {\n    super(getter, setter, endValue, interval, options, target);\n  }\n\n  /** 计算Tween动画总时长\n   * @member {number}\n   */\n  duration() {\n    // infinite\n    let duration = 0;\n\n    if (this.options.loops.count === -1) {\n      duration = -1;\n    } else {\n      // FIXME: add rewind time\n      duration = this.options.delay + this.options.loops.count * this.interval;\n    }\n\n    return duration;\n  }\n\n  /**\n   * 更新tween中的状态,并检测动画是否要结束\n   * @param {number} deltaTime 两帧之间的时间\n   * @private\n   */\n  update(deltaTime) {\n    this._time += deltaTime;\n    if (!this._paused) {\n      // if delay don't update\n      if (this.options.delay > this._time) {\n        return true;\n      }\n\n      this.elapsedTime += deltaTime;\n      // in case deltaTime is really big\n      this.elapsedTime = this.elapsedTime > this.interval ? this.interval : this.elapsedTime;\n\n      // on start callback\n      this.options.plugin(this);\n      this.options.onTick(this);\n\n      // everything has an end....\n      if (this.elapsedTime === this.interval) {\n        // loop it\n        if (this._remainLoops > 0 || this._remainLoops <= -1) {\n          switch (this.options.loops.type) {\n            case LOOP_TYPE.Yoyo:\n              this.rewind = !this.rewind;\n              this.elapsedTime = 0;\n              if (!this.rewind) {\n                this._remainLoops--;\n              }\n              break;\n            case LOOP_TYPE.Restart:\n              // reset\n              this.elapsedTime = 0;\n              this._remainLoops--;\n              break;\n          }\n        } else {\n          this.stop();\n        }\n      }\n\n      return true;\n    }\n  }\n}\n\nexport { Tweener };\n","export const FloatPlugin = tweener => {\n  const easing = tweener.options.easing;\n\n  const result = easing(\n    tweener.elapsedTime,\n    tweener.startValue,\n    tweener.endValue - tweener.startValue,\n    tweener.interval\n  );\n\n  tweener.setter(result);\n};\n","import generator from \"./core/VectorPluginFactory\";\n\nconst Vector2Plugin = generator(2);\n\nexport { Vector2Plugin };\n","import generator from \"./core/VectorPluginFactory\";\n\nconst Vector3Plugin = generator(3);\n\nexport { Vector3Plugin };\n","import generator from \"./core/VectorPluginFactory\";\n\nconst Vector4Plugin = generator(4);\n\nexport { Vector4Plugin };\n"],"names":["Tween","_nextId","tweeners","tweener","id","getId","deltaTime","tweenerId","update","_played","_paused","preserved","LOOP_TYPE","Restart","Yoyo","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","i","Math","abs","newtonRaphsonIterate","aGuessT","currentSlope","LinearEasing","x","bezier","mY1","mY2","Error","sampleValues","Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","BezierEasing","linear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","_ref","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInElastic","a","p","s","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","v","easeOutBounce","easeInOutBounce","bezierEasing","x1","y1","x2","y2","easing","noop","TweenerBase","getter","setter","endValue","interval","options","_time","_remainLoops","elapsedTime","rewind","startValue","loops","count","type","Easing","delay","plugin","pluginOptions","onComplete","onTick","key","value","tweenManager","add","Tweener","target","duration","stop","FloatPlugin","result","Vector2Plugin","generator","Vector3Plugin","Vector4Plugin"],"mappings":"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"}