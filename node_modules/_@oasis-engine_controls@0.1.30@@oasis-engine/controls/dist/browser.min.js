!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("oasis-engine"),require("@oasis-engine/tween")):"function"==typeof define&&define.amd?define(["exports","oasis-engine","@oasis-engine/tween"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@oasisEngine/controls"]={},e.oasisEngine,e["@oasisEngine/tween"])}(this,(function(e,t,o){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,i=h(e);if(t){var n=h(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return c(this,o)}}function m(e,t,o){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,o){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(o):n.value}})(e,t,o||e)}var d=t.MathUtil.zeroTolerance;function p(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return o.some((function(t){return-1!==e.indexOf(t)}))}var v=new o.Tween,_=function(e){a(r,e);var n=u(r);function r(e){var o;return i(this,r),(o=n.call(this,e))._forward=new t.Vector3,o._right=new t.Vector3,o.camera=void 0,o.mainElement=void 0,o.domElement=void 0,o.movementSpeed=void 0,o.rotateSpeed=void 0,o.floorMock=void 0,o.floorY=void 0,o.jumpY=void 0,o.jumpDuration=void 0,o.press=void 0,o.keysForward=void 0,o.keysBackward=void 0,o.keysLeft=void 0,o.keysRight=void 0,o.keysJump=void 0,o._theta=void 0,o._phi=void 0,o._moveForward=void 0,o._moveBackward=void 0,o._moveLeft=void 0,o._moveRight=void 0,o._moveJump=void 0,o._v3Cache=void 0,o._spherical=void 0,o._rotateOri=void 0,o._events=void 0,o.tempVec3=new t.Vector3,o.camera=e,o.mainElement=o.scene.engine.canvas._webCanvas,o.domElement=document,o.movementSpeed=1,o.rotateSpeed=1,o.floorMock=!0,o.floorY=0,o.jumpY=1,o.jumpDuration=600,o.press=!1,o.keysForward=["KeyW","ArrowUp"],o.keysBackward=["KeyS","ArrowDown"],o.keysLeft=["KeyA","ArrowLeft"],o.keysRight=["KeyD","ArrowRight"],o.keysJump=["Space"],o._theta=0,o._phi=0,o._moveForward=!1,o._moveBackward=!1,o._moveLeft=!1,o._moveRight=!1,o._moveJump=!1,o._v3Cache=new t.Vector3,o._spherical=new t.Spherical,o._rotateOri=[0,0],o._events=[{type:"mousemove",listener:o.onMouseMove.bind(l(o))},{type:"touchmove",listener:o.onMouseMove.bind(l(o))},{type:"mousedown",listener:o.onMouseDown.bind(l(o))},{type:"touchstart",listener:o.onMouseDown.bind(l(o))},{type:"mouseup",listener:o.onMouseUp.bind(l(o))},{type:"touchend",listener:o.onMouseUp.bind(l(o))},{type:"keydown",listener:o.onKeyDown.bind(l(o)),element:window},{type:"keyup",listener:o.onKeyUp.bind(l(o)),element:window},{type:"contextmenu",listener:o.onContextMenu.bind(l(o))}],o.initEvents(),o.updateSpherical(),o}return s(r,[{key:"onContextMenu",value:function(e){e.preventDefault()}},{key:"onKeyDown",value:function(e){var t=e.code,o=e.key,i=e.keyCode;p(this.keysForward,t,o,i)?this._moveForward=!0:p(this.keysBackward,t,o,i)?this._moveBackward=!0:p(this.keysLeft,t,o,i)?this._moveLeft=!0:p(this.keysRight,t,o,i)?this._moveRight=!0:p(this.keysJump,t,o,i)&&this.jump()}},{key:"onKeyUp",value:function(e){var t=e.code,o=e.key,i=e.keyCode;p(this.keysForward,t,o,i)?this._moveForward=!1:p(this.keysBackward,t,o,i)?this._moveBackward=!1:p(this.keysLeft,t,o,i)?this._moveLeft=!1:p(this.keysRight,t,o,i)&&(this._moveRight=!1)}},{key:"onMouseDown",value:function(e){e.stopPropagation(),e=e.changedTouches&&e.changedTouches[0]||e,this.domElement!==document&&this.domElement.focus(),this.press=!0,this._rotateOri=[e.clientX,e.clientY]}},{key:"onMouseUp",value:function(e){e.preventDefault(),e.stopPropagation(),this.press=!1}},{key:"onMouseMove",value:function(e){if(!1!==this.press&&!1!==this.enabled){e.preventDefault(),e.stopPropagation();var t=(e=e.changedTouches&&e.changedTouches[0]||e).clientX-this._rotateOri[0],o=e.clientY-this._rotateOri[1];this._rotateOri[0]=e.clientX,this._rotateOri[1]=e.clientY;var i=t*(180/this.mainElement.width),n=o*(180/this.mainElement.height);this.rotate(-i,n)}}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._theta+=t.MathUtil.degreeToRadian(e),this._phi+=t.MathUtil.degreeToRadian(o),this._phi=t.MathUtil.clamp(this._phi,d,Math.PI-d),this._spherical.theta=this._theta,this._spherical.phi=this._phi,this._spherical.setToVec3(this._v3Cache),t.Vector3.add(this.camera.position,this._v3Cache,this._v3Cache),this.camera.transform.lookAt(this._v3Cache,new t.Vector3(0,1,0))}},{key:"jump",value:function(){var e=this;if(!this._moveJump){this._moveJump=!0;var i=this.camera.position;o.doTransform.Translate(this.camera,new t.Vector3(i.x,this.jumpY,i.z),this.jumpDuration/2,{easing:o.Easing.easeOutSine,onComplete:function(){o.doTransform.Translate(e.camera,new t.Vector3(i.x,e.floorY,i.z),e.jumpDuration/2,{easing:o.Easing.easeInSine,onComplete:function(){e._moveJump=!1}}).start(v)}}).start(v)}}},{key:"translateOnAxis",value:function(e,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.camera.position,n=new t.Vector3;t.Vector3.normalize(e,n),i.add(n.scale(o))}},{key:"onUpdate",value:function(e){if(!1!==this.enabled){var t=e/1e3*this.movementSpeed;this.camera.transform.getWorldForward(this._forward),this.camera.transform.getWorldRight(this._right),this._moveForward&&this.translateOnAxis(this._forward,t),this._moveBackward&&this.translateOnAxis(this._forward,-t),this._moveLeft&&this.translateOnAxis(this._right,-t),this._moveRight&&this.translateOnAxis(this._right,t),v.update(e);var o=this.camera.transform.position;this.floorMock&&!this._moveJump&&(o.setValue(o.x,this.floorY,o.z),this.camera.transform.position=o)}}},{key:"initEvents",value:function(){var e=this;this._events.forEach((function(t){t.element?t.element.addEventListener(t.type,t.listener,!1):e.mainElement.addEventListener(t.type,t.listener,!1)}))}},{key:"destroy",value:function(){var e=this;this._events.forEach((function(t){t.element?t.element.removeEventListener(t.type,t.listener,!1):e.mainElement.removeEventListener(t.type,t.listener,!1)})),m(h(r.prototype),"destroy",this).call(this)}},{key:"updateSpherical",value:function(){this._v3Cache.setValue(0,0,-1),t.Vector3.transformByQuat(this._v3Cache,this.camera.rotation,this._v3Cache),this._spherical.setFromVec3(this._v3Cache),this._theta=this._spherical.theta,this._phi=this._spherical.phi}}]),r}(t.Script),f=function(e){a(n,e);var o=u(n);function n(e){var s;return i(this,n),(s=o.call(this,e)).camera=void 0,s.domElement=void 0,s.mainElement=void 0,s.fov=void 0,s.target=void 0,s.up=void 0,s.minDistance=void 0,s.maxDistance=void 0,s.minZoom=void 0,s.maxZoom=void 0,s.enableDamping=void 0,s.zoomFactor=void 0,s.enableRotate=void 0,s.keyPanSpeed=void 0,s.minPolarAngle=void 0,s.maxPolarAngle=void 0,s.minAzimuthAngle=void 0,s.maxAzimuthAngle=void 0,s.enableZoom=void 0,s.dampingFactor=void 0,s.zoomSpeed=void 0,s.enablePan=void 0,s.autoRotate=void 0,s.autoRotateSpeed=void 0,s.rotateSpeed=void 0,s.enableKeys=void 0,s.keys=void 0,s.mouseButtons=void 0,s.touchFingers=void 0,s._position=void 0,s._offset=void 0,s._spherical=void 0,s._sphericalDelta=void 0,s._sphericalDump=void 0,s._zoomFrag=void 0,s._scale=void 0,s._panOffset=void 0,s._isMouseUp=void 0,s._vPan=void 0,s.constEvents=void 0,s._state=void 0,s._rotateStart=void 0,s._rotateEnd=void 0,s._rotateDelta=void 0,s._panStart=void 0,s._panEnd=void 0,s._panDelta=void 0,s._zoomStart=void 0,s._zoomEnd=void 0,s._zoomDelta=void 0,s.STATE=void 0,s.mouseUpEvents=void 0,s.camera=e,s.mainElement=s.engine.canvas._webCanvas,s.domElement=document,s.fov=45,s.target=new t.Vector3,s.up=new t.Vector3(0,1,0),s.minDistance=.1,s.maxDistance=1/0,s.minZoom=0,s.maxZoom=1/0,s.minPolarAngle=0,s.maxPolarAngle=Math.PI,s.minAzimuthAngle=-1/0,s.maxAzimuthAngle=1/0,s.enableDamping=!0,s.dampingFactor=.1,s.zoomFactor=.2,s.enableZoom=!0,s.zoomSpeed=1,s.enableRotate=!0,s.rotateSpeed=1,s.enablePan=!0,s.keyPanSpeed=7,s.autoRotate=!1,s.autoRotateSpeed=2,s.enableKeys=!1,s.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},s.mouseButtons={ORBIT:0,ZOOM:1,PAN:2},s.touchFingers={ORBIT:1,ZOOM:2,PAN:3},s._position=new t.Vector3,s._offset=new t.Vector3,s._spherical=new t.Spherical,s._sphericalDelta=new t.Spherical,s._sphericalDump=new t.Spherical,s._zoomFrag=0,s._scale=1,s._panOffset=new t.Vector3,s._isMouseUp=!0,s._vPan=new t.Vector3,s._rotateStart=new t.Vector2,s._rotateEnd=new t.Vector2,s._rotateDelta=new t.Vector2,s._panStart=new t.Vector2,s._panEnd=new t.Vector2,s._panDelta=new t.Vector2,s._zoomStart=new t.Vector2,s._zoomEnd=new t.Vector2,s._zoomDelta=new t.Vector2,s.STATE={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM:4,TOUCH_PAN:5},s._state=s.STATE.NONE,s.constEvents=[{type:"mousedown",listener:s.onMouseDown.bind(l(s))},{type:"wheel",listener:s.onMouseWheel.bind(l(s))},{type:"keydown",listener:s.onKeyDown.bind(l(s)),element:window},{type:"touchstart",listener:s.onTouchStart.bind(l(s))},{type:"touchmove",listener:s.onTouchMove.bind(l(s))},{type:"touchend",listener:s.onTouchEnd.bind(l(s))},{type:"contextmenu",listener:s.onContextMenu.bind(l(s))}],s.mouseUpEvents=[{type:"mousemove",listener:s.onMouseMove.bind(l(s))},{type:"mouseup",listener:s.onMouseUp.bind(l(s))}],s.constEvents.forEach((function(e){e.element?e.element.addEventListener(e.type,e.listener,!1):s.mainElement.addEventListener(e.type,e.listener,!1)})),s.addEventListener("disabled",(function(){var e=s.domElement===document?s.domElement.body:s.domElement;s.mainElement.removeEventListener(s.mouseUpEvents[0].type,s.mouseUpEvents[0].listener,!1),e.removeEventListener(s.mouseUpEvents[1].type,s.mouseUpEvents[1].listener,!1)})),s}return s(n,[{key:"destroy",value:function(){var e=this;this.constEvents.forEach((function(t){t.element?t.element.removeEventListener(t.type,t.listener,!1):e.mainElement.removeEventListener(t.type,t.listener,!1)}));var t=this.domElement===document?this.domElement.body:this.domElement;this.mainElement.removeEventListener(this.mouseUpEvents[0].type,this.mouseUpEvents[0].listener,!1),t.removeEventListener(this.mouseUpEvents[1].type,this.mouseUpEvents[1].listener,!1),m(h(n.prototype),"destroy",this).call(this)}},{key:"setOneFingerRotate",value:function(){this.touchFingers.ORBIT=1,this.touchFingers.ZOOM=2,this.touchFingers.PAN=3}},{key:"setOneFingerPan",value:function(){this.touchFingers.ORBIT=3,this.touchFingers.ZOOM=2,this.touchFingers.PAN=1}},{key:"onUpdate",value:function(e){this.enabled&&(m(h(n.prototype),"onUpdate",this).call(this,e),this.camera.position.cloneTo(this._offset),this._offset.subtract(this.target),this._spherical.setFromVec3(this._offset),this.autoRotate&&this._state===this.STATE.NONE&&this.rotateLeft(this.getAutoRotationAngle(e)),this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi,this._spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),1!==this._scale&&(this._zoomFrag=this._spherical.radius*(this._scale-1)),this._spherical.radius+=this._zoomFrag,this._spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this._spherical.radius)),this.target.add(this._panOffset),this._spherical.setToVec3(this._offset),this.target.cloneTo(this._position),this._position.add(this._offset),this.camera.position=this._position,this.camera.transform.lookAt(this.target,this.up),!0===this.enableDamping?(this._sphericalDump.theta*=1-this.dampingFactor,this._sphericalDump.phi*=1-this.dampingFactor,this._zoomFrag*=1-this.zoomFactor,this._isMouseUp?(this._sphericalDelta.theta=this._sphericalDump.theta,this._sphericalDelta.phi=this._sphericalDump.phi):this._sphericalDelta.set(0,0,0)):(this._sphericalDelta.set(0,0,0),this._zoomFrag=0),this._scale=1,this._panOffset.setValue(0,0,0))}},{key:"getAutoRotationAngle",value:function(e){return 2*Math.PI/this.autoRotateSpeed/1e3*e}},{key:"getZoomScale",value:function(){return Math.pow(.95,this.zoomSpeed)}},{key:"rotateLeft",value:function(e){this._sphericalDelta.theta-=e,this.enableDamping&&(this._sphericalDump.theta=-e)}},{key:"rotateUp",value:function(e){this._sphericalDelta.phi-=e,this.enableDamping&&(this._sphericalDump.phi=-e)}},{key:"panLeft",value:function(e,t){var o=t.elements;this._vPan.setValue(o[0],o[1],o[2]),this._vPan.scale(e),this._panOffset.add(this._vPan)}},{key:"panUp",value:function(e,t){var o=t.elements;this._vPan.setValue(o[4],o[5],o[6]),this._vPan.scale(e),this._panOffset.add(this._vPan)}},{key:"pan",value:function(e,t){var o=this.domElement===document?this.domElement.body:this.domElement;this.camera.position.cloneTo(this._vPan),this._vPan.subtract(this.target);var i=this._vPan.length();i*=this.fov/2*(Math.PI/180),this.panLeft(-2*e*(i/o.clientHeight),this.camera.transform.worldMatrix),this.panUp(2*t*(i/o.clientHeight),this.camera.transform.worldMatrix)}},{key:"zoomIn",value:function(e){this._scale*=e}},{key:"zoomOut",value:function(e){this._scale/=e}},{key:"handleMouseDownRotate",value:function(e){this._rotateStart.setValue(e.clientX,e.clientY)}},{key:"handleMouseDownZoom",value:function(e){this._zoomStart.setValue(e.clientX,e.clientY)}},{key:"handleMouseDownPan",value:function(e){this._panStart.setValue(e.clientX,e.clientY)}},{key:"handleMouseMoveRotate",value:function(e){this._rotateEnd.setValue(e.clientX,e.clientY),t.Vector2.subtract(this._rotateEnd,this._rotateStart,this._rotateDelta);var o=this.domElement===document?document.body:this.domElement;this.rotateLeft(2*Math.PI*(this._rotateDelta.x/o.clientWidth)*this.rotateSpeed),this.rotateUp(2*Math.PI*(this._rotateDelta.y/o.clientHeight)*this.rotateSpeed),this._rotateEnd.cloneTo(this._rotateStart)}},{key:"handleMouseMoveZoom",value:function(e){this._zoomEnd.setValue(e.clientX,e.clientY),t.Vector2.subtract(this._zoomEnd,this._zoomStart,this._zoomDelta),this._zoomDelta.y>0?this.zoomOut(this.getZoomScale()):this._zoomDelta.y<0&&this.zoomIn(this.getZoomScale()),this._zoomEnd.cloneTo(this._zoomStart)}},{key:"handleMouseMovePan",value:function(e){this._panEnd.setValue(e.clientX,e.clientY),t.Vector2.subtract(this._panEnd,this._panStart,this._panDelta),this.pan(this._panDelta.x,this._panDelta.y),this._panEnd.cloneTo(this._panStart)}},{key:"handleMouseWheel",value:function(e){e.deltaY<0?this.zoomIn(this.getZoomScale()):e.deltaY>0&&this.zoomOut(this.getZoomScale())}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case this.keys.UP:this.pan(0,this.keyPanSpeed);break;case this.keys.BOTTOM:this.pan(0,-this.keyPanSpeed);break;case this.keys.LEFT:this.pan(this.keyPanSpeed,0);break;case this.keys.RIGHT:this.pan(-this.keyPanSpeed,0)}}},{key:"handleTouchStartRotate",value:function(e){this._rotateStart.setValue(e.touches[0].pageX,e.touches[0].pageY)}},{key:"handleTouchStartZoom",value:function(e){var t=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+o*o);this._zoomStart.setValue(0,i)}},{key:"handleTouchStartPan",value:function(e){this._panStart.setValue(e.touches[0].pageX,e.touches[0].pageY)}},{key:"handleTouchMoveRotate",value:function(e){this._rotateEnd.setValue(e.touches[0].pageX,e.touches[0].pageY),t.Vector2.subtract(this._rotateEnd,this._rotateStart,this._rotateDelta);var o=this.domElement===document?this.domElement.body:this.domElement;this.rotateLeft(2*Math.PI*this._rotateDelta.x/o.clientWidth*this.rotateSpeed),this.rotateUp(2*Math.PI*this._rotateDelta.y/o.clientHeight*this.rotateSpeed),this._rotateEnd.cloneTo(this._rotateStart)}},{key:"handleTouchMoveZoom",value:function(e){var o=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(o*o+i*i);this._zoomEnd.setValue(0,n),t.Vector2.subtract(this._zoomEnd,this._zoomStart,this._zoomDelta),this._zoomDelta.y>0?this.zoomIn(this.getZoomScale()):this._zoomDelta.y<0&&this.zoomOut(this.getZoomScale()),this._zoomEnd.cloneTo(this._zoomStart)}},{key:"handleTouchMovePan",value:function(e){this._panEnd.setValue(e.touches[0].pageX,e.touches[0].pageY),t.Vector2.subtract(this._panEnd,this._panStart,this._panDelta),this.pan(this._panDelta.x,this._panDelta.y),this._panEnd.cloneTo(this._panStart)}},{key:"onMouseDown",value:function(e){if(!1!==this.enabled){switch(e.preventDefault(),this._isMouseUp=!1,e.button){case this.mouseButtons.ORBIT:if(!1===this.enableRotate)return;this.handleMouseDownRotate(e),this._state=this.STATE.ROTATE;break;case this.mouseButtons.ZOOM:if(!1===this.enableZoom)return;this.handleMouseDownZoom(e),this._state=this.STATE.ZOOM;break;case this.mouseButtons.PAN:if(!1===this.enablePan)return;this.handleMouseDownPan(e),this._state=this.STATE.PAN}if(this._state!==this.STATE.NONE){var t=this.domElement===document?this.domElement.body:this.domElement;this.mainElement.addEventListener(this.mouseUpEvents[0].type,this.mouseUpEvents[0].listener,!1),t.addEventListener(this.mouseUpEvents[1].type,this.mouseUpEvents[1].listener,!1)}}}},{key:"onMouseMove",value:function(e){if(!1!==this.enabled)switch(e.preventDefault(),this._state){case this.STATE.ROTATE:if(!1===this.enableRotate)return;this.handleMouseMoveRotate(e);break;case this.STATE.ZOOM:if(!1===this.enableZoom)return;this.handleMouseMoveZoom(e);break;case this.STATE.PAN:if(!1===this.enablePan)return;this.handleMouseMovePan(e)}}},{key:"onMouseUp",value:function(){var e=this;!1!==this.enabled&&(this._isMouseUp=!0,this.mouseUpEvents.forEach((function(t){(e.domElement===document?e.domElement.body:e.domElement).removeEventListener(t.type,t.listener,!1),e.mainElement.removeEventListener(t.type,t.listener,!1)})),this._state=this.STATE.NONE)}},{key:"onMouseWheel",value:function(e){!1===this.enabled||!1===this.enableZoom||this._state!==this.STATE.NONE&&this._state!==this.STATE.ROTATE||(e.preventDefault(),e.stopPropagation(),this.handleMouseWheel(e))}},{key:"onKeyDown",value:function(e){!1!==this.enabled&&!1!==this.enableKeys&&!1!==this.enablePan&&this.handleKeyDown(e)}},{key:"onTouchStart",value:function(e){if(!1!==this.enabled)switch(this._isMouseUp=!1,e.touches.length){case this.touchFingers.ORBIT:if(!1===this.enableRotate)return;this.handleTouchStartRotate(e),this._state=this.STATE.TOUCH_ROTATE;break;case this.touchFingers.ZOOM:if(!1===this.enableZoom)return;this.handleTouchStartZoom(e),this._state=this.STATE.TOUCH_ZOOM;break;case this.touchFingers.PAN:if(!1===this.enablePan)return;this.handleTouchStartPan(e),this._state=this.STATE.TOUCH_PAN;break;default:this._state=this.STATE.NONE}}},{key:"onTouchMove",value:function(e){if(!1!==this.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case this.touchFingers.ORBIT:if(!1===this.enableRotate)return;if(this._state!==this.STATE.TOUCH_ROTATE)return;this.handleTouchMoveRotate(e);break;case this.touchFingers.ZOOM:if(!1===this.enableZoom)return;if(this._state!==this.STATE.TOUCH_ZOOM)return;this.handleTouchMoveZoom(e);break;case this.touchFingers.PAN:if(!1===this.enablePan)return;if(this._state!==this.STATE.TOUCH_PAN)return;this.handleTouchMovePan(e);break;default:this._state=this.STATE.NONE}}},{key:"onTouchEnd",value:function(){!1!==this.enabled&&(this._isMouseUp=!0,this._state=this.STATE.NONE)}},{key:"onContextMenu",value:function(e){!1!==this.enabled&&e.preventDefault()}}]),n}(t.Script);e.FreeControl=_,e.OrbitControl=f,Object.defineProperty(e,"__esModule",{value:!0})}));
