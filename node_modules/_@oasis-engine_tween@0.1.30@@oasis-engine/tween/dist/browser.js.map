{"version":3,"file":"browser.js","sources":["../src/Tween.ts","../src/Enums.ts","../src/BezierEasing.ts","../src/Easing.ts","../src/TweenerBase.ts","../src/Tweener.ts","../src/plugins/QuaternionPlugin.ts","../src/plugins/FloatPlugin.ts","../src/plugins/core/VectorPluginFactory.ts","../src/plugins/Vector2Plugin.ts","../src/plugins/Vector3Plugin.ts","../src/plugins/Vector4Plugin.ts","../src/adapters/o3.ts"],"sourcesContent":["/**\n * Tween类\n * @class\n */\nclass Tween {\n  private _nextId;\n  public tweeners;\n  /**\n   * @constructor\n   */\n  constructor() {\n    this._nextId = 0;\n    this.tweeners = {};\n  }\n\n  /**\n   * 下一个id\n   * @member {number}\n   * @readonly\n   */\n  getId() {\n    return this._nextId++;\n  }\n\n  /**\n   * 增加关键帧\n   * @param {Object} tweener 关键帧\n   */\n  add(tweener) {\n    if (!tweener.id) {\n      tweener.id = this.getId();\n    }\n    this.tweeners[tweener.id] = tweener;\n  }\n\n  /**\n   * 更新tween内部的状态,删除已经播放过且不需要的关键帧\n   * @param {number}  deltaTime 两帧之间的时间\n   */\n  update(deltaTime) {\n    for (const tweenerId in this.tweeners) {\n      const tweener = this.tweeners[tweenerId];\n\n      tweener.update(deltaTime);\n\n      // remove unused tweener\n      if (tweener._played && tweener._paused && !tweener.preserved) {\n        delete this.tweeners[tweenerId];\n      }\n    }\n  }\n}\n\nexport { Tween };\n","export const LOOP_TYPE = {\n  Restart: 0,\n  Yoyo: 1\n  // 暂时不实现\n  // Incremental: 2,\n};\n","/**\n * Fork from https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === \"function\";\n\nfunction A(aA1, aA2) {\n  return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n}\nfunction B(aA1, aA2) {\n  return 3.0 * aA2 - 6.0 * aA1;\n}\nfunction C(aA1) {\n  return 3.0 * aA1;\n}\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier(aT, aA1, aA2) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n}\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope(aT, aA1, aA2) {\n  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n}\n\nfunction binarySubdivide(aX, aA, aB, mX1, mX2) {\n  var currentX,\n    currentT,\n    i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n    var currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) {\n      return aGuessT;\n    }\n    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n}\n\nfunction LinearEasing(x) {\n  return x;\n}\n\nexport function bezier(mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error(\"bezier x values must be in [0, 1] range\");\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX(aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing(x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0 || x === 1) {\n      return x;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n}\n","import { bezier } from \"./BezierEasing\";\n\n// t, b, c, d => currentTime, startValue, changeInValue, totalTime\nexport function linear(t, b, c, d) {\n  return (c * t) / d + b;\n}\n\nexport function easeInQuad(t, b, c, d) {\n  return c * (t /= d) * t + b;\n}\n\nexport function easeOutQuad(t, b, c, d) {\n  return -c * (t /= d) * (t - 2) + b;\n}\n\nexport function easeInOutQuad(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t + b;\n  } else {\n    return (-c / 2) * (--t * (t - 2) - 1) + b;\n  }\n}\n\nexport function easeInCubic(t, b, c, d) {\n  return c * (t /= d) * t * t + b;\n}\n\nexport function easeOutCubic(t, b, c, d) {\n  return c * ((t = t / d - 1) * t * t + 1) + b;\n}\n\nexport function easeInOutCubic(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t * t + b;\n  } else {\n    return (c / 2) * ((t -= 2) * t * t + 2) + b;\n  }\n}\n\nexport function easeInQuart(t, b, c, d) {\n  return c * (t /= d) * t * t * t + b;\n}\n\nexport function easeOutQuart(t, b, c, d) {\n  return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n}\n\nexport function easeInOutQuart(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t * t * t + b;\n  } else {\n    return (-c / 2) * ((t -= 2) * t * t * t - 2) + b;\n  }\n}\n\nexport function easeInQuint(t, b, c, d) {\n  return c * (t /= d) * t * t * t * t + b;\n}\n\nexport function easeOutQuint(t, b, c, d) {\n  return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n}\n\nexport function easeInOutQuint(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * t * t * t * t * t + b;\n  } else {\n    return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n  }\n}\n\nexport function easeInSine(t, b, c, d) {\n  return -c * Math.cos((t / d) * (Math.PI / 2)) + c + b;\n}\n\nexport function easeOutSine(t, b, c, d) {\n  return c * Math.sin((t / d) * (Math.PI / 2)) + b;\n}\n\nexport function easeInOutSine(t, b, c, d) {\n  return (-c / 2) * (Math.cos((Math.PI * t) / d) - 1) + b;\n}\n\nexport function easeInExpo(t, b, c, d) {\n  let _ref;\n  return (_ref = t === 0) !== null\n    ? _ref\n    : {\n        b: c * Math.pow(2, 10 * (t / d - 1)) + b\n      };\n}\n\nexport function easeOutExpo(t, b, c, d) {\n  let _ref;\n  return (_ref = t === d) !== null\n    ? _ref\n    : b +\n        {\n          c: c * (-Math.pow(2, (-10 * t) / d) + 1) + b\n        };\n}\n\nexport function easeInOutExpo(t, b, c, d) {\n  if (t === 0) {\n    b;\n  }\n  if (t === d) {\n    b + c;\n  }\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * Math.pow(2, 10 * (t - 1)) + b;\n  } else {\n    return (c / 2) * (-Math.pow(2, -10 * --t) + 2) + b;\n  }\n}\n\nexport function easeInCirc(t, b, c, d) {\n  return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n}\n\nexport function easeOutCirc(t, b, c, d) {\n  return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n}\n\nexport function easeInOutCirc(t, b, c, d) {\n  if ((t /= d / 2) < 1) {\n    return (-c / 2) * (Math.sqrt(1 - t * t) - 1) + b;\n  } else {\n    return (c / 2) * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n  }\n}\n\nexport function easeInElastic(t, b, c, d) {\n  let a, p, s;\n  s = 1.70158;\n  p = 0;\n  a = c;\n  if (t === 0) {\n    b;\n  } else if ((t /= d) === 1) {\n    b + c;\n  }\n  if (!p) {\n    p = d * 0.3;\n  }\n  if (a < Math.abs(c)) {\n    a = c;\n    s = p / 4;\n  } else {\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\n  }\n  return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b;\n}\n\nexport function easeOutElastic(t, b, c, d) {\n  let a, p, s;\n  s = 1.70158;\n  p = 0;\n  a = c;\n  if (t === 0) {\n    b;\n  } else if ((t /= d) === 1) {\n    b + c;\n  }\n  if (!p) {\n    p = d * 0.3;\n  }\n  if (a < Math.abs(c)) {\n    a = c;\n    s = p / 4;\n  } else {\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\n  }\n  return a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) + c + b;\n}\n\nexport function easeInOutElastic(t, b, c, d) {\n  let a, p, s;\n  s = 1.70158;\n  p = 0;\n  a = c;\n  if (t === 0) {\n    b;\n  } else if ((t /= d / 2) === 2) {\n    b + c;\n  }\n  if (!p) {\n    p = d * (0.3 * 1.5);\n  }\n  if (a < Math.abs(c)) {\n    a = c;\n    s = p / 4;\n  } else {\n    s = (p / (2 * Math.PI)) * Math.asin(c / a);\n  }\n  if (t < 1) {\n    return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b;\n  } else {\n    return a * Math.pow(2, -10 * (t -= 1)) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) * 0.5 + c + b;\n  }\n}\n\nexport function easeInBack(t, b, c, d, s) {\n  if (s === void 0) {\n    s = 1.70158;\n  }\n  return c * (t /= d) * t * ((s + 1) * t - s) + b;\n}\n\nexport function easeOutBack(t, b, c, d, s) {\n  if (s === void 0) {\n    s = 1.70158;\n  }\n  return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n}\n\nexport function easeInOutBack(t, b, c, d, s) {\n  if (s === void 0) {\n    s = 1.70158;\n  }\n  if ((t /= d / 2) < 1) {\n    return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n  } else {\n    return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n  }\n}\n\nexport function easeInBounce(t, b, c, d) {\n  let v;\n  v = easeOutBounce(d - t, 0, c, d);\n  return c - v + b;\n}\n\nexport function easeOutBounce(t, b, c, d) {\n  if ((t /= d) < 1 / 2.75) {\n    return c * (7.5625 * t * t) + b;\n  } else if (t < 2 / 2.75) {\n    return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n  } else if (t < 2.5 / 2.75) {\n    return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n  } else {\n    return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n  }\n}\n\nexport function easeInOutBounce(t, b, c, d) {\n  let v;\n  if (t < d / 2) {\n    v = easeInBounce(t * 2, 0, c, d);\n    return v * 0.5 + b;\n  } else {\n    v = easeOutBounce(t * 2 - d, 0, c, d);\n    return v * 0.5 + c * 0.5 + b;\n  }\n}\n\n/**\n * 通过bezier曲线控制点入参生成easing\n * Hats off to gre：https://github.com/gre/bezier-easing\n *\n * @param x1 控制点1的 x，范围 0-1\n * @param y1 控制点1的 y，范围 0-1\n * @param x2 控制点2的 x，范围 0-1\n * @param y2 控制点2的 y，范围 0-1\n */\nexport function bezierEasing(x1, y1, x2, y2) {\n  const easing = bezier(x1, y1, x2, y2);\n\n  return (t, b, c, d) => {\n    return c * easing(t / d) + b;\n  };\n}\n","import { LOOP_TYPE } from \"./Enums\";\nimport * as Easing from \"./Easing\";\n\nconst noop = () => {};\n\n// on events\n// play, pause, complete, kill, rewind, update\n/**\n * TweenBase类\n * @class\n * @private\n */\nclass TweenerBase {\n  protected _time;\n  protected _paused;\n  protected _remainLoops;\n  protected _played;\n  public options;\n  public elapsedTime;\n  public interval;\n  public rewind;\n  public preserved;\n  public startValue;\n  public endValue;\n  public getter;\n  public setter;\n\n  constructor(getter, setter, endValue, interval, options = {}, target) {\n    this.options = {\n      id: \"\",\n      loops: {\n        // set -1 as infinite\n        count: 0,\n        type: LOOP_TYPE.Yoyo\n      },\n      easing: Easing.linear,\n      delay: 0,\n\n      plugin: noop,\n      pluginOptions: {},\n\n      // callbacks\n      onComplete: noop,\n      onTick: noop,\n\n      ...options\n    };\n\n    this._time = 0;\n    this._remainLoops = this.options.loops.count || 0;\n    this._paused = true;\n    this._played = false;\n    this.rewind = false;\n    this.preserved = false;\n\n    this.elapsedTime = 0;\n    this.startValue = getter();\n    this.endValue = endValue;\n    this.getter = getter;\n    this.setter = setter;\n\n    this.interval = interval;\n  }\n\n  duration() {}\n\n  update(deltaTime) {}\n\n  /**\n   * 设置循环数\n   * @param {number}  count 循环次数\n   * @param {LOOP_TYPE} type 循环类型\n   */\n  setLoops(count, type = LOOP_TYPE.Yoyo) {\n    this.options.loops = { count, type };\n    // reset loop\n    this._remainLoops = count;\n\n    return this;\n  }\n\n  set(key, value) {\n    this.options = { ...this.options, ...{ [key]: value } };\n    return this;\n  }\n\n  stop() {\n    this.options.onComplete(this);\n\n    this._paused = true;\n\n    return this;\n  }\n\n  pause() {\n    if (this._paused) return false;\n    this._paused = true;\n\n    return this;\n  }\n\n  start(tweenManager) {\n    if (tweenManager) {\n      tweenManager.add(this);\n    }\n\n    if (!this._paused) return false;\n    this.elapsedTime = 0;\n    this._paused = false;\n    this._played = true;\n\n    return this;\n  }\n}\n\nexport { TweenerBase };\n","import { LOOP_TYPE } from \"./Enums\";\nimport { TweenerBase } from \"./TweenerBase\";\n\nconst noop = () => {};\n\n// on events\n// play, pause, complete, kill, rewind, update\n/**\n * Tweener动画类\n * @extends TweenerBase\n */\nclass Tweener extends TweenerBase {\n  /**\n   * @constructor\n   * @param {function} getter 获取函数\n   * @param {function} setter 设置函数\n   * @param {number} endValue 结束值\n   * @param {number} interval 时间区间，以ms为单位\n   * @param {Object} options 配置\n   * @param target\n   * @param {function} options.onComplete 完成时调用的函数\n   */\n  constructor(getter, setter, endValue, interval, options = {}, target = null) {\n    super(getter, setter, endValue, interval, options, target);\n  }\n\n  /** 计算Tween动画总时长\n   * @member {number}\n   */\n  duration() {\n    // infinite\n    let duration = 0;\n\n    if (this.options.loops.count === -1) {\n      duration = -1;\n    } else {\n      // FIXME: add rewind time\n      duration = this.options.delay + this.options.loops.count * this.interval;\n    }\n\n    return duration;\n  }\n\n  /**\n   * 更新tween中的状态,并检测动画是否要结束\n   * @param {number} deltaTime 两帧之间的时间\n   * @private\n   */\n  update(deltaTime) {\n    this._time += deltaTime;\n    if (!this._paused) {\n      // if delay don't update\n      if (this.options.delay > this._time) {\n        return true;\n      }\n\n      this.elapsedTime += deltaTime;\n      // in case deltaTime is really big\n      this.elapsedTime = this.elapsedTime > this.interval ? this.interval : this.elapsedTime;\n\n      // on start callback\n      this.options.plugin(this);\n      this.options.onTick(this);\n\n      // everything has an end....\n      if (this.elapsedTime === this.interval) {\n        // loop it\n        if (this._remainLoops > 0 || this._remainLoops <= -1) {\n          switch (this.options.loops.type) {\n            case LOOP_TYPE.Yoyo:\n              this.rewind = !this.rewind;\n              this.elapsedTime = 0;\n              if (!this.rewind) {\n                this._remainLoops--;\n              }\n              break;\n            case LOOP_TYPE.Restart:\n              // reset\n              this.elapsedTime = 0;\n              this._remainLoops--;\n              break;\n          }\n        } else {\n          this.stop();\n        }\n      }\n\n      return true;\n    }\n  }\n}\n\nexport { Tweener };\n","import { Quaternion } from \"oasis-engine\";\n\nexport const QuaternionPlugin = (tweener) => {\n  const { easing } = tweener.options;\n\n  const result = new Quaternion();\n\n  const percent = easing(tweener.elapsedTime, 0, 1, tweener.interval);\n  Quaternion.slerp(tweener.startValue, tweener.endValue, percent, result);\n\n  tweener.setter(result);\n};\n","export const FloatPlugin = tweener => {\n  const easing = tweener.options.easing;\n\n  const result = easing(\n    tweener.elapsedTime,\n    tweener.startValue,\n    tweener.endValue - tweener.startValue,\n    tweener.interval\n  );\n\n  tweener.setter(result);\n};\n","import { Vector2, Vector3, Vector4 } from \"oasis-engine\";\n\nconst handleVecComp = (tweener, comp: string, result: Vector2 | Vector3 | Vector4) => {\n  const easing = tweener.options.easing;\n\n  let startValue = tweener.startValue[comp];\n  let offsetValue = tweener.endValue[comp] - tweener.startValue[comp];\n\n  if (tweener.rewind) {\n    startValue = tweener.endValue[comp];\n    offsetValue = tweener.startValue[comp] - tweener.endValue[comp];\n  }\n\n  result[comp] = easing(tweener.elapsedTime, startValue, offsetValue, tweener.interval);\n};\n\nconst VectorPluginGenerator = (count) => {\n  return (tweener) => {\n    let result;\n    switch (count) {\n      case 2:\n        result = new Vector2();\n        handleVecComp(tweener, \"x\", result);\n        handleVecComp(tweener, \"y\", result);\n        break;\n      case 3:\n        result = new Vector3();\n        handleVecComp(tweener, \"x\", result);\n        handleVecComp(tweener, \"y\", result);\n        handleVecComp(tweener, \"z\", result);\n        break;\n      default:\n        result = new Vector4();\n        handleVecComp(tweener, \"x\", result);\n        handleVecComp(tweener, \"y\", result);\n        handleVecComp(tweener, \"z\", result);\n        handleVecComp(tweener, \"w\", result);\n        break;\n    }\n\n    tweener.setter(result);\n  };\n};\n\nexport default VectorPluginGenerator;\n","import generator from \"./core/VectorPluginFactory\";\n\nconst Vector2Plugin = generator(2);\n\nexport { Vector2Plugin };\n","import generator from \"./core/VectorPluginFactory\";\n\nconst Vector3Plugin = generator(3);\n\nexport { Vector3Plugin };\n","import generator from \"./core/VectorPluginFactory\";\n\nconst Vector4Plugin = generator(4);\n\nexport { Vector4Plugin };\n","import * as TweenPlugins from \"../plugins\";\nimport { Tweener } from \"../Tweener\";\nimport { DataType } from \"oasis-engine\";\n\n/***  做旋转的插值变换\n * @param {Object}  obj 物体\n * @param {quat} endValue 旋转终值(四元数)\n * @param {number} interval 时间区间\n * @param {Object} options 选项\n * @param {function} options.onComplete 完成后调用函数\n */\nconst doTransformRotate = (obj, endValue, interval, options: any = {}) => {\n  options.plugin = options.plugin || TweenPlugins.QuaternionPlugin;\n  return new Tweener(\n    () => obj.rotation.clone(),\n    (value) => (obj.rotation = value),\n    endValue,\n    interval,\n    options,\n    obj\n  );\n};\n\n/*** 做平移的插值变换\n * @param {Object}  obj 物体\n * @param {Vector3} endValue 平移终值\n * @param {number} interval 时间区间\n * @param {Object} options 选项\n * @param {function} options.onComplete 完成后调用函数\n */\nconst doTransformTranslate = (obj, endValue, interval, options: any = {}) => {\n  options.plugin = options.plugin || TweenPlugins.Vector3Plugin;\n\n  return new Tweener(\n    () => obj.position.clone(),\n    (value) => (obj.position = value),\n    endValue,\n    interval,\n    options,\n    obj\n  );\n};\n\n/*** 做缩放的插值变换\n * @param {Object}  obj 物体\n * @param {Vector3} endValue 缩放终值\n * @param {number} interval 时间区间\n * @param {Object} options 选项\n * @param {function} options.onComplete 完成后调用函数\n */\nconst doTransformScale = (obj, endValue, interval, options: any = {}) => {\n  options.plugin = options.plugin || TweenPlugins.Vector3Plugin;\n  return new Tweener(\n    () => obj.scale.clone(),\n    (value) => (obj.scale = value),\n    endValue,\n    interval,\n    options,\n    obj\n  );\n};\n\n/*** 做材质参数的插值变换\n * @param {Material}  mtl 材质\n * @param {*} endValue 材质参数终值\n * @param {string} property 材质属性\n * @param {number} interval 时间区间\n * @param {Object} options 选项\n * @param {function} options.onComplete 完成后调用函数\n */\nconst doMaterialValue = (mtl, endValue, property = \"\", interval, options: any = {}) => {\n  options.plugin = options.plugin || TweenPlugins.FloatPlugin;\n\n  return new Tweener(\n    () => mtl.getValue(property),\n    (value) => mtl.setValue(property, value),\n    endValue,\n    interval,\n    options,\n    mtl\n  );\n};\n\n/*** 做材质颜色的插值变换\n * @param {Material}  mtl 材质\n * @param {Vector3} endValue 材质颜色终值\n * @param {string} property 材质属性\n * @param {number} interval 时间区间\n * @param {Object} options 选项\n * @param {function} options.onComplete 完成后调用函数\n */\nconst doMaterialColor = (mtl, endValue, property = \"\", interval, options: any = {}) => {\n  options.plugin = options.plugin || TweenPlugins.Vector3Plugin;\n\n  return new Tweener(\n    () => mtl.getValue(property),\n    (value) => {\n      mtl.setValue(property, [value[0] / 255, value[1] / 255, value[2] / 255]);\n    },\n    endValue,\n    interval,\n    options,\n    mtl\n  );\n};\n\n/*** 做一般数值的插值变换\n * @param {number|Vector2|Vector3|Vector4}  startValue 起始值\n * @param {function} setter 设置函数\n * @param {number|Vector2|Vector3|Vector4} endValue 终止值\n * @param interval\n * @param {Object} options 选项\n * @param {DataType} options.dataType\n * @param {function} options.onComplete 完成后调用函数\n */\nconst doTransformByDataType = (startValue, setter, endValue, interval, options: any = {}) => {\n  if (options.dataType === DataType.FLOAT_VEC2) {\n    options.plugin = options.plugin || TweenPlugins.Vector2Plugin;\n    return new Tweener(() => startValue.clone(), setter, endValue, interval, options);\n  } else if (options.dataType === DataType.FLOAT_VEC3) {\n    options.plugin = options.plugin || TweenPlugins.Vector3Plugin;\n    return new Tweener(() => startValue.clone(), setter, endValue, interval, options);\n  } else if (options.dataType === DataType.FLOAT_VEC4) {\n    options.plugin = options.plugin || TweenPlugins.Vector3Plugin;\n    return new Tweener(() => startValue.clone(), setter, endValue, interval, options);\n  } else {\n    options.plugin = options.plugin || TweenPlugins.FloatPlugin;\n    return new Tweener(() => startValue, setter, endValue, interval, options);\n  }\n};\n\nexport const doTransform = {\n  Rotate: doTransformRotate,\n  Translate: doTransformTranslate,\n  Scale: doTransformScale,\n  DataType: doTransformByDataType\n};\n\nexport const doMaterial = {\n  Float: doMaterialValue,\n  Color: doMaterialColor\n};\n"],"names":["Tween","_nextId","tweeners","tweener","id","getId","deltaTime","tweenerId","update","_played","_paused","preserved","LOOP_TYPE","Restart","Yoyo","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","i","Math","abs","newtonRaphsonIterate","aGuessT","currentSlope","LinearEasing","x","bezier","mY1","mY2","Error","sampleValues","Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","BezierEasing","linear","t","b","c","d","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","_ref","pow","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInElastic","a","p","s","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","v","easeOutBounce","easeInOutBounce","bezierEasing","x1","y1","x2","y2","easing","noop","TweenerBase","getter","setter","endValue","interval","options","_time","_remainLoops","elapsedTime","rewind","startValue","loops","count","type","Easing","delay","plugin","pluginOptions","onComplete","onTick","key","value","tweenManager","add","Tweener","target","duration","stop","QuaternionPlugin","result","Quaternion","percent","slerp","FloatPlugin","handleVecComp","comp","offsetValue","VectorPluginGenerator","Vector2","Vector3","Vector4","Vector2Plugin","generator","Vector3Plugin","Vector4Plugin","doTransformRotate","obj","TweenPlugins","rotation","clone","doTransformTranslate","position","doTransformScale","scale","doMaterialValue","mtl","property","getValue","setValue","doMaterialColor","doTransformByDataType","dataType","DataType","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","doTransform","Rotate","Translate","Scale","doMaterial","Float","Color"],"mappings":"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"}